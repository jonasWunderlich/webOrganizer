{"version":3,"sources":["../../../scripts.babel/app/directives/page-panel.js"],"names":[],"mappings":"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","file":"page-panel.js","sourcesContent":["'use strict';\n\n/**\n * @ngdoc directive\n * @name newTa .directive:panel\n * @restrict EA\n * @scope\n * @description\n * Displays a Panel\n *\n * @Example\n * <page-panel site=\"site\" context=\"context\"></page-panel>\n *\n */\n\nangular.module('newTab')\n  .directive('pagePanel', function($log) {\n    return {\n      restrict: 'EA',\n      replace: true,\n      templateUrl: 'views/page-panel.html',\n      scope: {\n        'site':'=',\n        'context:':'='\n      },\n      link: function(scope, element, attrs) {\n\n        /**\n         * @ngdoc method\n         * @name getContextColor\n         * @methodOf newTab.pagePanel\n         * @description Returns Background-Style for Context-Color\n         * @returns {string} Background-Style for Context\n         */\n        scope.getContextColor = function() {\n          if(scope.site.context) {\n            if(scope.site.context.indexOf('neutral') !== 0) {\n              return 'background:'+scope.context;\n            }\n          }\n        };\n\n        /**\n         * @ngdoc method\n         * @name getContextColorIfBookmark\n         * @methodOf newTab.pagePanel\n         * @description Return the Background-Style of a Context if site is set as Bookmark\n         * @returns {string} Background-Style for Context if Bookmark\n         */\n        scope.getContextColorIfBookmark = function() {\n          if(scope.site.context && scope.site.bookmark) {\n            if(scope.site.context.indexOf('neutral') !== 0) {\n              return 'background:'+scope.context;\n            }\n          }\n        };\n\n        /**\n         * @ngdoc method\n         * @name isTab\n         * @methodOf newTab.pagePanel\n         * @description Checks if site is opened as tab\n         * @returns {object} Object if tab is set or else undefined\n         */\n        scope.isTab = function() {\n          return scope.site.tab;\n        };\n\n        /**\n         * @ngdoc method\n         * @name getPanelClasses\n         * @methodOf newTab.pagePanel\n         * @description Sets all the different possible classes for a panel-page\n         * @returns {string}\n         */\n        scope.getPanelClasses = function() {\n          var _classes;\n          _classes = (scope.site.bookmark) ? 'bookmark ' : '';\n          _classes += (scope.site.tab) ? 'tab ' : '';\n          // sets substring as class\n          _classes += scope.site.url.substr(scope.site.url.indexOf('://')+3,12).split('.').join('_')+' ';\n          // set file ending as class\n          _classes += (scope.site.url.substr(-4,1) === '.') ? scope.site.url.substr(-3,3)+' ' : '';\n          switch (scope.site.visitCount > 1) {\n            case (scope.site.visitCount < 5):\n              _classes += 'visits-1';\n              break;\n            case (scope.site.visitCount >= 5 &&scope.site.visitCount < 10):\n              _classes += 'visits-2';\n              break;\n            case (scope.site.visitCount >= 10):\n              _classes += 'visits-3';\n              break;\n          }\n          return _classes;\n        };\n\n        /**\n         * @ngdoc method\n         * @name setBookmark\n         * @methodOf newTab.pagePanel\n         * @description removes existing Bookmark or creates it in the surrounded Context\n         */\n        scope.setBookmark = function() {\n          if(scope.site.bookmark) {\n            chrome.bookmarks.remove(scope.site.bookmark, function(result) {\n              $log.debug(\"Bookmark removed:\", result);\n              scope.site.bookmark = false;\n            });\n          } else {\n            chrome.bookmarks.create({'parentId':scope.site.context,\n              'title':scope.site.title,\n              'url':scope.site.url\n            }, function(result) {\n              $log.debug(\"Bookmark added:\", result);\n              scope.site.bookmark = result.id;\n            });\n          }\n        };\n\n        /**\n         * @ngdoc method\n         * @name activateTab\n         * @methodOf newTab.pagePanel\n         * @param tab\n         * @description activates the Tab on the selected Site\n         */\n        scope.activateTab = function(tab) {\n          $log.debug('trying to activate tab', tab);\n          chrome.tabs.update(tab.id, {selected: true});\n        };\n\n        /**\n         * @ngdoc method\n         * @name closeTab\n         * @methodOf newTab.pagePanel\n         * @description Closes the tab\n         */\n        scope.closeTab = function() {\n          $log.debug('trying to close tab',scope.site);\n          chrome.tabs.remove(scope.site.tab.id, function(result){\n            $log.debug('Tab Closed', result);\n            delete scope.site.tab;\n          });\n        };\n\n        /**\n         * @ngdoc method\n         * @name openContent\n         * @methodOf newTab.pagePanel\n         * @description activates existing Tabs or else opens Url in active Window/Tab\n         */\n        scope.openContent = function() {\n          if(scope.site.tab) {\n            scope.activateTab(tab);\n          } else {\n            window.location = scope.site.url;\n          }\n        };\n\n        /**\n         * @ngdoc method\n         * @name getTitle\n         * @methodOf newTab.pagePanel\n         * @returns {*}\n         * @description Returns title or edited Version of Title if its empty\n         */\n        scope.getTitle = function() {\n          scope.site.title = scope.site.title.split(' - Google-Suche')[0];\n          return scope.site.title !== '' ? scope.site.title : scope.site.url.split('#')[1];\n        };\n\n\n\n\n\n\n        /**\n         * @ngdoc method\n         * @name toggleContext\n         * @methodOf newTab.pagePanel\n         * @description Toggles the activity of a context\n         * @param {object} context\n         */\n        scope.toggleContext = function(context) {\n          $log.debug('Toggle Context', context);\n          $log.debug('Toggle Context', deactivatedTabs);\n\n          if(deactivatedTabs[context]) {\n            scope.createTabs(context);\n          } else {\n            scope.deactivateContext(context);\n          }\n        };\n\n\n      }\n    }\n  });\n"]}