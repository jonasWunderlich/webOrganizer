{"version":3,"sources":["../../../scripts.babel/app/controllers/newTabPage.js"],"names":[],"mappings":"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","file":"newTabPage.js","sourcesContent":["'use strict';\n\n/**\n * @ngdoc function\n * @name app.controller:NewTabPageController\n * @description\n * Controller of the app\n */\n\nangular.module('newTab')\n  .controller('NewTabPageController', function ($scope, $log, BrowserHistory, Storage) {\n\n    var deactivatedTabs = [];\n\n    /**\n     * @ngdoc method\n     * @name getData\n     * @methodOf newTab.NewTabPageController\n     * @description Write all the Data in the scope\n     */\n    var getData = function() {\n      BrowserHistory.getProcessedHistory().then(function(d) {\n        $scope.allSites = d.reverse();\n      });\n      BrowserHistory.getBookmarks().then(function(d) {\n        $scope.bookmarks = d;\n      });\n      BrowserHistory.getOpenTabs().then(function(d) {\n        $scope.openedTabs = d;\n      });\n      Storage.getStorageBytesInUse().then(function(d) {\n        $scope.storageBytesInUse = d;\n      });\n      Storage.getStorage().then(function(d) {\n        $scope.storageData = d;\n      });\n    };\n\n\n    /**\n     * @ngdoc method\n     * @name activateContext\n     * @methodOf newTab.NewTabPageController\n     * @description Activates a specific context: retrieves all closed Tabs & shows Content of hidden Context\n     * @param context\n     */\n    $scope.activateContext = function(context) {\n      deactivatedTabs[context].forEach(function(tab) {\n      $log.debug('Rebuild the Tabs of Context');\n        chrome.tabs.create(tab, function(callback) {\n          delete deactivatedTabs[context];\n          $log.debug('Tab created', callback);\n        });\n      });\n      //TODO:\n    };\n\n    /**\n     * @ngdoc method\n     * @name deactivateContext\n     * @methodOf newTab.NewTabPageController\n     * @description DeActivates a specific context: Closes all Tabs in this Context & hides all Content of this Context\n     * @param context\n     */\n    $scope.deactivateContext = function(context) {\n      $log.debug('Deactivate Context / close all Tabs');\n      var removeTabs = [];\n      var indexesOfTabsToRemove = [];\n      $scope.allSites.forEach(function(site) {\n        if(site.tab && site.context === context) {\n          var tabToRemove = {\n            windowId: site.tab.windowId,\n            index: site.tab.id,\n            url: site.url,\n            active: site.tab.active,\n            pinned: site.tab.pinned,\n            openerTabId: site.tab.openerTabId\n          };\n          removeTabs.push(tabToRemove);\n          indexesOfTabsToRemove.push(site.tab.id);\n        }\n      });\n      chrome.tabs.remove(indexesOfTabsToRemove, function(callback){\n        deactivatedTabs[context] = removeTabs;\n        $log.debug('Tabs removed',callback);\n      });\n    };\n\n    /**\n     * @ngdoc method\n     * @name _init\n     * @methodOf newTab.NewTabPageController\n     * @description Run Functions at Startup\n     */\n    var _init = function() {\n      getData();\n    };\n\n    _init();\n\n\n\n  });"]}