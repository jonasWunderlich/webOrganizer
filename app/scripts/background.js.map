{"version":3,"sources":["../scripts.babel/background.js"],"names":[],"mappings":"AAAA,YAAY,CAAC;;AAEb,MAAM,CAAC,OAAO,CAAC,WAAW,CAAC,WAAW,CAAC,UAAU,OAAO,EAAE;AACxD,SAAO,CAAC,GAAG,CAAC,iBAAiB,EAAE,OAAO,CAAC,eAAe,CAAC,CAAC;CACzD,CAAC,CAAC;;AAEH,MAAM,CAAC,aAAa,CAAC,YAAY,CAAC,EAAE,IAAI,EAAE,OAAO,EAAE,CAAC,CAAC;;AAErD,OAAO,CAAC,GAAG,CAAC,2BAA2B,CAAC,CAAC;;;AAGzC,MAAM,CAAC,YAAY,CAAC,MAAM,CAAC;AACzB,OAAK,EAAE,qCAAqC;AAC5C,IAAE,EAAC,uBAAuB;AAC1B,UAAQ,EAAE,CAAC,KAAK,CAAC;CAClB,EAAE,YAAW;AACZ,MAAI,KAAK,GAAG,MAAM,CAAC,OAAO,CAAC,SAAS,CAAC;AACrC,MAAG,KAAK,EAAE;AACR,WAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;GACpB,MACI;AACH,WAAO,CAAC,GAAG,CAAC,sBAAsB,CAAC,CAAC;GACrC;CACF,CAAC,CAAC;;AAEH,MAAM,CAAC,YAAY,CAAC,SAAS,CAAC,WAAW,CAAC,UAAS,GAAG,EAAE;AACtD,SAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;;CAEhB,CAAC,CAAC;;;AAIL,IAAI,gBAAgB,CAAC;AACrB,IAAI,QAAQ,GAAG,EAAE,CAAC;AAClB,IAAI,cAAc,GAAG,EAAE,CAAC;;AAExB,MAAM,CAAC,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,gBAAgB,EAAE,UAAS,MAAM,EAAE;AAC1D,MAAI,MAAM,CAAC,cAAc,KAAK,IAAI,EAAE;AAClC,kBAAc,GAAG,MAAM,CAAC,cAAc,CAAC;AACvC,WAAO,cAAc,CAAC;GACvB;CACF,CAAC,CAAC;;AAEH,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC,WAAW,CAAC,UAAS,KAAK,EAAE,UAAU,EAAE,GAAG,EAAE;AACjE,MAAI,UAAU,CAAC,MAAM,KAAK,UAAU,EAAE;AACpC,WAAO,gBAAgB,CAAC,GAAG,CAAC,GAAG,EAAE,GAAG,CAAC,WAAW,CAAC,CAAC;GACnD;CACF,CAAC,CAAC;;;;;;;AAOH,gBAAgB,GAAG,UAAS,SAAS,EAAE,WAAW,EAAE;AAClD,MAAI,KAAK,GAAG,CAAC,CAAC;AACd,MAAI,OAAO,WAAW,KAAK,WAAW,EAAE;AACtC,WAAO,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,WAAW,EAAE,UAAS,SAAS,EAAE;AACtD,UAAI,SAAS,CAAC,GAAG,KAAK,kBAAkB,IAAI,SAAS,KAAK,kBAAkB,EAAE;AAC5E,eAAO,MAAM,CAAC,OAAO,CAAC,SAAS,CAAC;AAC9B,aAAG,EAAE,SAAS;SACf,EAAE,UAAS,UAAU,EAAE;AACtB,cAAI,UAAU,CAAC,MAAM,GAAG,CAAC,EAAE;AACzB,iBAAK,GAAG,UAAU,CAAC,UAAU,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,OAAO,CAAC;AAClD,mBAAO,MAAM,CAAC,OAAO,CAAC,SAAS,CAAC;AAC9B,iBAAG,EAAE,SAAS,CAAC,GAAG;aACnB,EAAE,UAAS,UAAU,EAAE;AACtB,4BAAc,CAAC,KAAK,CAAC,GAAG,UAAU,CAAC,UAAU,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,OAAO,CAAC;AAClE,qBAAO,MAAM,CAAC,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC;AAC9B,gCAAgB,EAAE,cAAc;eACjC,CAAC,CAAC;aACJ,CAAC,CAAC;WACJ;SACF,CAAC,CAAC;OACJ;KACF,CAAC,CAAC;GACJ;CACF,CAAC;;AAEF,MAAM,CAAC,aAAa,CAAC,WAAW,CAAC,WAAW,CAAC,UAAS,OAAO,EAAE;AAC7D,MAAI,OAAO,CAAC,oBAAoB,EAAE;AAChC,QAAI,OAAO,CAAC,oBAAoB,KAAK,cAAc,EAAE;AACnD,cAAQ,GAAG,OAAO,CAAC,GAAG,CAAC;AACvB,aAAO,QAAQ,CAAC;KACjB;GACF;CACF,CAAC,CAAC","file":"background.js","sourcesContent":["'use strict';\n\nchrome.runtime.onInstalled.addListener(function (details) {\n  console.log('previousVersion', details.previousVersion);\n});\n\nchrome.browserAction.setBadgeText({ text: 'Hello' });\n\nconsole.log('This is the backtround.js');\n//# sourceMappingURL=background.js.map\n\nchrome.contextMenus.create({\n  title: 'This is your chrome extension menu!',\n  id:'selectFromContextMenu',\n  contexts: ['all']\n}, function() {\n  var error = chrome.runtime.lastError;\n  if(error) {\n    console.log(error);\n  }\n  else {\n    console.log('Context menu created');\n  }\n});\n\nchrome.contextMenus.onClicked.addListener(function(tab) {\n  console.log(tab);\n    // alert('Hello world');\n  });\n\n\n// This is the background-functionality or the old navigator\nvar setTabConnection;\nvar lastPage = '';\nvar tabConnections = {};\n\nchrome.storage.local.get('tabConnections', function(result) {\n  if (result.tabConnections !== null) {\n    tabConnections = result.tabConnections;\n    return tabConnections;\n  }\n});\n\nchrome.tabs.onUpdated.addListener(function(tabId, changeInfo, tab) {\n  if (changeInfo.status === 'complete') {\n    return setTabConnection(tab.url, tab.openerTabId);\n  }\n});\n\n/**\n * [setTabConnection description]\n * @param {[type]} newTabUrl   [description]\n * @param {[type]} openerTabId [description]\n */\nsetTabConnection = function(newTabUrl, openerTabId) {\n  var visit = 0;\n  if (typeof openerTabId !== 'undefined') {\n    return chrome.tabs.get(openerTabId, function(openertab) {\n      if (openertab.url !== 'chrome://newtab/' && newTabUrl !== 'chrome://newtab/') {\n        return chrome.history.getVisits({\n          url: newTabUrl\n        }, function(visitItems) {\n          if (visitItems.length > 0) {\n            visit = visitItems[visitItems.length - 1].visitId;\n            return chrome.history.getVisits({\n              url: openertab.url\n            }, function(visitItems) {\n              tabConnections[visit] = visitItems[visitItems.length - 1].visitId;\n              return chrome.storage.local.set({\n                'tabConnections': tabConnections\n              });\n            });\n          }\n        });\n      }\n    });\n  }\n};\n\nchrome.webNavigation.onCommitted.addListener(function(details) {\n  if (details.transitionQualifiers) {\n    if (details.transitionQualifiers === 'forward_back') {\n      lastPage = details.url;\n      return lastPage;\n    }\n  }\n});"]}